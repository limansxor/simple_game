<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í…Œë‘ë¦¬ ë‹¬ë¦¬ê¸° ê²Œì„</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: #1a1a2e;
            color: white;
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }
        
        #gameContainer {
            position: relative;
            width: 600px;
            height: 400px;
            border: 8px solid #16213e;
            background: linear-gradient(45deg, #0f3460, #16213e);
            margin: 20px 0;
            overflow: hidden;
        }
        
        #gameArea {
            width: 100%;
            height: 100%;
            position: relative;
        }
        
        #player {
            width: 12px;
            height: 12px;
            background: linear-gradient(45deg, #e94560, #f39c12);
            border-radius: 50%;
            position: absolute;
            transition: none;
            box-shadow: 0 0 8px rgba(233, 69, 96, 0.8);
            z-index: 10;
        }
        
        .obstacle {
            background: #e74c3c;
            position: absolute;
            border-radius: 2px;
            box-shadow: 0 0 6px rgba(231, 76, 60, 0.6);
        }
        
        .coin {
            width: 8px;
            height: 8px;
            background: #f1c40f;
            position: absolute;
            border-radius: 50%;
            box-shadow: 0 0 6px rgba(241, 196, 15, 0.8);
            animation: coinSpin 1.5s linear infinite;
        }
        
        @keyframes coinSpin {
            0% { transform: rotate(0deg) scale(1); }
            50% { transform: rotate(180deg) scale(1.3); }
            100% { transform: rotate(360deg) scale(1); }
        }
        
        #ui {
            text-align: center;
            margin: 10px 0;
        }
        
        #score, #speed {
            font-size: 18px;
            margin: 0 20px;
            color: #f39c12;
        }
        
        #instructions {
            text-align: center;
            margin: 20px 0;
            color: #bdc3c7;
            line-height: 1.6;
        }
        
        #gameOver {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.9);
            padding: 30px;
            border-radius: 10px;
            text-align: center;
            display: none;
            border: 2px solid #e94560;
            z-index: 100;
        }
        
        button {
            background: #e94560;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px;
            transition: background 0.3s;
        }
        
        button:hover {
            background: #c0392b;
        }
        
        /* í…Œë‘ë¦¬ ê²½ë¡œ ì‹œê°í™” */
        .path-indicator {
            position: absolute;
            background: rgba(233, 69, 96, 0.1);
            border: 1px dashed rgba(233, 69, 96, 0.3);
        }
        
        #pathBottom { bottom: 0; left: 0; right: 0; height: 30px; }
        #pathRight { right: 0; top: 0; bottom: 0; width: 30px; }
        #pathTop { top: 0; left: 0; right: 0; height: 30px; }
        #pathLeft { left: 0; top: 0; bottom: 0; width: 30px; }
    </style>
</head>
<body>
    <h1>ğŸƒâ€â™‚ï¸ í…Œë‘ë¦¬ ë‹¬ë¦¬ê¸° ê²Œì„</h1>
    
    <div id="ui">
        <span id="score">ì ìˆ˜: 0</span>
        <span id="speed">ì†ë„: 1</span>
    </div>
    
    <div id="gameContainer">
        <div id="gameArea">
            <!-- ê²½ë¡œ í‘œì‹œ -->
            <div class="path-indicator" id="pathBottom"></div>
            <div class="path-indicator" id="pathRight"></div>
            <div class="path-indicator" id="pathTop"></div>
            <div class="path-indicator" id="pathLeft"></div>
            
            <div id="player"></div>
        </div>
        <div id="gameOver">
            <h2>ê²Œì„ ì˜¤ë²„!</h2>
            <p>ìµœì¢… ì ìˆ˜: <span id="finalScore">0</span></p>
            <button onclick="restartGame()">ë‹¤ì‹œ ì‹œì‘</button>
        </div>
    </div>
    
    <div id="instructions">
        <p><strong>ì¡°ì‘ë²•:</strong> ë§ˆìš°ìŠ¤ í´ë¦­ìœ¼ë¡œ ì í”„</p>
        <p>í…Œë‘ë¦¬ ê²½ë¡œë¥¼ ë”°ë¼ ë‹¬ë¦¬ë©° ì¥ì• ë¬¼ì„ í”¼í•˜ê³  ì½”ì¸ì„ ìˆ˜ì§‘í•˜ì„¸ìš”!</p>
        <p>ëª¨ì„œë¦¬ì— ë„ë‹¬í•˜ë©´ ë‹¤ìŒ ë©´ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤ ğŸ”„</p>
    </div>

    <script>
        class BorderRunnerGame {
            constructor() {
                this.gameArea = document.getElementById('gameArea');
                this.player = document.getElementById('player');
                this.gameContainer = document.getElementById('gameContainer');
                
                this.gameWidth = 600;
                this.gameHeight = 400;
                this.pathWidth = 30;
                
                this.playerSize = 12;
                this.playerSpeed = 0.9;
                this.jumpHeight = 22;
                
                // í˜„ì¬ ìœ„ì¹˜ì™€ ìƒíƒœ
                this.currentSide = 0; // 0: ë°”ë‹¥, 1: ì˜¤ë¥¸ìª½, 2: ì²œì¥, 3: ì™¼ìª½
                this.progress = 0; // í˜„ì¬ ë©´ì—ì„œì˜ ì§„í–‰ë„ (0-1)
                this.jumpOffset = 0;
                this.jumpVelocity = 0;
                this.isJumping = false;
                
                this.obstacles = [];
                this.coins = [];
                this.score = 0;
                this.gameSpeed = 1;
                this.isGameRunning = true;
                
                this.obstacleSpawnTimer = 0;
                this.coinSpawnTimer = 0;
                
                this.init();
            }
            
            init() {
                this.updatePlayerPosition();
                this.setupEventListeners();
                this.gameLoop();
            }
            
            setupEventListeners() {
                this.gameContainer.addEventListener('click', () => {
                    this.jump();
                });
            }
            
            jump() {
                if (!this.isGameRunning || this.isJumping) return;
                
                this.isJumping = true;
                this.jumpVelocity = -7.0;
            }
            
            updatePlayer() {
                // í…Œë‘ë¦¬ë¥¼ ë”°ë¼ ì´ë™
                this.progress += (this.playerSpeed * this.gameSpeed) / 200;
                
                // ë‹¤ìŒ ë©´ìœ¼ë¡œ ë„˜ì–´ê°€ê¸°
                if (this.progress >= 1) {
                    this.progress = 0;
                    this.currentSide = (this.currentSide + 1) % 4;
                }
                
                // ì í”„ ì²˜ë¦¬
                if (this.isJumping) {
                    this.jumpOffset += this.jumpVelocity;
                    this.jumpVelocity += 0.5; // ì¤‘ë ¥
                    
                    if (this.jumpOffset >= 0) {
                        this.jumpOffset = 0;
                        this.jumpVelocity = 0;
                        this.isJumping = false;
                    }
                }
                
                this.updatePlayerPosition();
            }
            
            updatePlayerPosition() {
                let x, y;
                
                if (this.currentSide === 0) { // ë°”ë‹¥
                    x = this.progress * this.gameWidth;
                    y = this.gameHeight - this.pathWidth/2 + this.jumpOffset;
                } else if (this.currentSide === 1) { // ì˜¤ë¥¸ìª½
                    x = this.gameWidth - this.pathWidth/2 + this.jumpOffset;
                    y = this.gameHeight - (this.progress * this.gameHeight);
                } else if (this.currentSide === 2) { // ì²œì¥
                    x = this.gameWidth - (this.progress * this.gameWidth);
                    y = this.pathWidth/2 - this.jumpOffset;
                } else if (this.currentSide === 3) { // ì™¼ìª½
                    x = this.pathWidth/2 - this.jumpOffset;
                    y = this.progress * this.gameHeight;
                }
                
                this.player.style.left = (x - this.playerSize/2) + 'px';
                this.player.style.top = (y - this.playerSize/2) + 'px';
            }
            
            spawnObstacle() {
                const obstacle = document.createElement('div');
                obstacle.className = 'obstacle';
                
                // í”Œë ˆì´ì–´ë³´ë‹¤ ì•ì„œ ë°°ì¹˜
                let spawnSide = this.currentSide;
                let spawnProgress = this.progress + 0.3 + Math.random() * 0.3;
                
                // ë‹¤ìŒ ë©´ì— ë°°ì¹˜
                if (spawnProgress > 1) {
                    spawnProgress -= 1;
                    spawnSide = (spawnSide + 1) % 4;
                }
                
                let x, y, width, height;
                
                if (spawnSide === 0) { // ë°”ë‹¥
                    width = 12;
                    height = 20;
                    x = spawnProgress * this.gameWidth;
                    y = this.gameHeight - this.pathWidth/2;
                } else if (spawnSide === 1) { // ì˜¤ë¥¸ìª½
                    width = 20;
                    height = 12;
                    x = this.gameWidth - this.pathWidth/2;
                    y = this.gameHeight - (spawnProgress * this.gameHeight);
                } else if (spawnSide === 2) { // ì²œì¥
                    width = 12;
                    height = 20;
                    x = this.gameWidth - (spawnProgress * this.gameWidth);
                    y = this.pathWidth/2;
                } else if (spawnSide === 3) { // ì™¼ìª½
                    width = 20;
                    height = 12;
                    x = this.pathWidth/2;
                    y = spawnProgress * this.gameHeight;
                }
                
                obstacle.style.width = width + 'px';
                obstacle.style.height = height + 'px';
                obstacle.style.left = (x - width/2) + 'px';
                obstacle.style.top = (y - height/2) + 'px';
                
                this.gameArea.appendChild(obstacle);
                this.obstacles.push({
                    element: obstacle,
                    side: spawnSide,
                    progress: spawnProgress,
                    width: width,
                    height: height
                });
            }
            
            spawnCoin() {
                const coin = document.createElement('div');
                coin.className = 'coin';
                
                // í”Œë ˆì´ì–´ë³´ë‹¤ ì•ì„œ ë°°ì¹˜
                let spawnSide = this.currentSide;
                let spawnProgress = this.progress + 0.2 + Math.random() * 0.5;
                
                // ë‹¤ìŒ ë©´ì— ë°°ì¹˜
                if (spawnProgress > 1) {
                    spawnProgress -= 1;
                    spawnSide = (spawnSide + 1) % 4;
                }
                
                let x, y;
                let jumpOffset = -10 - Math.random() * 15; // ê³µì¤‘ì— ë°°ì¹˜
                
                if (spawnSide === 0) { // ë°”ë‹¥
                    x = spawnProgress * this.gameWidth;
                    y = this.gameHeight - this.pathWidth/2 + jumpOffset;
                } else if (spawnSide === 1) { // ì˜¤ë¥¸ìª½
                    x = this.gameWidth - this.pathWidth/2 + jumpOffset;
                    y = this.gameHeight - (spawnProgress * this.gameHeight);
                } else if (spawnSide === 2) { // ì²œì¥
                    x = this.gameWidth - (spawnProgress * this.gameWidth);
                    y = this.pathWidth/2 - jumpOffset;
                } else if (spawnSide === 3) { // ì™¼ìª½
                    x = this.pathWidth/2 - jumpOffset;
                    y = spawnProgress * this.gameHeight;
                }
                
                coin.style.left = (x - 4) + 'px';
                coin.style.top = (y - 4) + 'px';
                
                this.gameArea.appendChild(coin);
                this.coins.push({
                    element: coin,
                    side: spawnSide,
                    progress: spawnProgress,
                    x: x,
                    y: y
                });
            }
            
            updateObstacles() {
                this.obstacles.forEach((obstacle, index) => {
                    // í”Œë ˆì´ì–´ë³´ë‹¤ ë’¤ì³ì§„ ì¥ì• ë¬¼ ì œê±°
                    let shouldRemove = false;
                    
                    if (obstacle.side === this.currentSide) {
                        if (obstacle.progress < this.progress - 0.1) {
                            shouldRemove = true;
                        }
                    } else {
                        // ë‹¤ë¥¸ ë©´ì˜ ì¥ì• ë¬¼ë„ ì‹œê°„ì— ë”°ë¼ ì œê±°
                        let sideDiff = (this.currentSide - obstacle.side + 4) % 4;
                        if (sideDiff > 1) shouldRemove = true;
                    }
                    
                    if (shouldRemove) {
                        obstacle.element.remove();
                        this.obstacles.splice(index, 1);
                        return;
                    }
                    
                    // ì¶©ëŒ ê²€ì‚¬ (ê°™ì€ ë©´ì— ìˆì„ ë•Œë§Œ)
                    if (obstacle.side === this.currentSide) {
                        let progressDiff = Math.abs(obstacle.progress - this.progress);
                        if (progressDiff < 0.03 && Math.abs(this.jumpOffset) < 8) {
                            this.gameOver();
                        }
                    }
                });
            }
            
            updateCoins() {
                this.coins.forEach((coin, index) => {
                    // í”Œë ˆì´ì–´ë³´ë‹¤ ë’¤ì³ì§„ ì½”ì¸ ì œê±°
                    let shouldRemove = false;
                    
                    if (coin.side === this.currentSide) {
                        if (coin.progress < this.progress - 0.1) {
                            shouldRemove = true;
                        }
                    } else {
                        let sideDiff = (this.currentSide - coin.side + 4) % 4;
                        if (sideDiff > 1) shouldRemove = true;
                    }
                    
                    if (shouldRemove) {
                        coin.element.remove();
                        this.coins.splice(index, 1);
                        return;
                    }
                    
                    // ì½”ì¸ ìˆ˜ì§‘ (ê°™ì€ ë©´ì— ìˆì„ ë•Œ)
                    if (coin.side === this.currentSide) {
                        let progressDiff = Math.abs(coin.progress - this.progress);
                        let playerX = parseFloat(this.player.style.left) + this.playerSize/2;
                        let playerY = parseFloat(this.player.style.top) + this.playerSize/2;
                        let distance = Math.sqrt((playerX - coin.x) ** 2 + (playerY - coin.y) ** 2);
                        
                        if (distance < 12) {
                            coin.element.remove();
                            this.coins.splice(index, 1);
                            this.score += 10;
                            this.updateUI();
                        }
                    }
                });
            }
            
            updateUI() {
                document.getElementById('score').textContent = `ì ìˆ˜: ${this.score}`;
                document.getElementById('speed').textContent = `ì†ë„: ${this.gameSpeed.toFixed(1)}`;
            }
            
            gameOver() {
                this.isGameRunning = false;
                document.getElementById('finalScore').textContent = this.score;
                document.getElementById('gameOver').style.display = 'block';
            }
            
            gameLoop() {
                if (!this.isGameRunning) return;
                
                this.updatePlayer();
                this.updateObstacles();
                this.updateCoins();
                
                // ì¥ì• ë¬¼ ìƒì„±
                this.obstacleSpawnTimer++;
                if (this.obstacleSpawnTimer > 120 / this.gameSpeed) {
                    this.spawnObstacle();
                    this.obstacleSpawnTimer = 0;
                }
                
                // ì½”ì¸ ìƒì„±
                this.coinSpawnTimer++;
                if (this.coinSpawnTimer > 180 / this.gameSpeed) {
                    this.spawnCoin();
                    this.coinSpawnTimer = 0;
                }
                
                // ì ìˆ˜ì™€ ì†ë„ ì¦ê°€
                this.score += 1;
                this.gameSpeed += 0.0002;
                
                if (this.score % 50 === 0) {
                    this.updateUI();
                }
                
                requestAnimationFrame(() => this.gameLoop());
            }
        }
        
        let game;
        
        function startGame() {
            game = new BorderRunnerGame();
        }
        
        function restartGame() {
            document.getElementById('gameOver').style.display = 'none';
            document.querySelectorAll('.obstacle, .coin').forEach(el => el.remove());
            startGame();
        }
        
        startGame();
    </script>
</body>
</html>